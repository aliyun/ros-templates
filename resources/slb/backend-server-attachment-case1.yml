ROSTemplateFormatVersion: '2015-09-01'
Parameters:
  BackendServerList:
    AssociationProperty: ALIYUN::ECS::Instance::InstanceId
    Type: CommaDelimitedList
    Description: The comma delimited instance id list.If the property "BackendServers" is setting, this property will be ignored.
  LoadBalancerId:
    AssociationProperty: ALIYUN::SLB::Instance::InstanceId
    Type: String
    Description: The id of load balancer.
Resources:
  BackendServer:
    Type: ALIYUN::SLB::BackendServerAttachment
    Properties:
      BackendServerList:
        Ref: BackendServerList
      LoadBalancerId:
        Ref: LoadBalancerId
      BackendServerWeightList:
        - 50
Outputs:
  LoadBalancerId:
    Description: The id of load balancer.
    Value:
      Fn::GetAtt:
        - BackendServer
        - LoadBalancerId
  BackendServers:
    Description: The collection of attached backend server.
    Value:
      Fn::GetAtt:
        - BackendServer
        - BackendServers