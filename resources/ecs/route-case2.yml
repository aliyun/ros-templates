ROSTemplateFormatVersion: '2015-09-01'
Parameters:
  DestinationCidrBlock:
    Required: true
    Type: String
    Description:
      en: The RouteEntry's target network segment.
    Label:
      zh-cn: 自定义路由条目的目标网段
      en: DestinationCidrBlock
  RouteTableId:
    Required: true
    Type: String
    Description:
      en: RouteTableId of created route entry.
    Label:
      zh-cn: 路由表ID
      en: RouteTableId
  NextHopType:
    Default: Instance
    Required: false
    Type: String
    Description:
      en: The next hop type. Now support 'Instance|HaVip|RouterInterface|NetworkInterface|VpnGateway|IPv6Gateway|NatGateway|Attachment'. The default value is Instance.When the NextHopList is specified, the value will be ignored.
    Label:
      zh-cn: 自定义路由条目的下一跳类型
      en: NextHopType
  NextHopId:
    Default: Null
    Required: false
    Type: String
    Description:
      en: The route entry's next hop. When the NextHopList is specified, the value will be ignored.
    Label:
      zh-cn: 自定义路由条目的下一跳实例ID
      en: NextHopId
  NextHopList:
    AssociationPropertyMetadata:
      Parameters:
        NextHopId:
          Required: true
          Type: String
          Description:
            en: Route entry next hop Instance id or Tunnel id.
          Label:
            zh-cn: ECMP路由条目的下一跳实例的ID
            en: NextHopId
        NextHopType:
          Default: RouterInterface
          Required: false
          Type: String
          Description:
            en: Route entry next hop type. Now support 'RouterInterface'.
          Label:
            zh-cn: ECMP路由条目的下一跳的类型
            en: NextHopType
    Description:
      en: The route entry's next hop list. If router is virtual border router, the value will be ignore. The list should contain 2-4 next hop. NextHopId of each next hop must be RouterInterface that VRouter forwards to VBR.
    Default: Null
    Required: false
    Label:
      zh-cn: 自定义路由条目的下一跳的列表
      en: NextHopList
    AssociationProperty: List[Parameters]
    Type: Json
Resources:
  RouteEntry:
    Type: ALIYUN::ECS::Route
    Properties:
      DestinationCidrBlock:
        Ref: DestinationCidrBlock
      RouteTableId:
        Ref: RouteTableId
      NextHopType:
        Ref: NextHopType
      NextHopId:
        Ref: NextHopId
      NextHopList:
        Ref: NextHopList
Outputs:
  RouteEntryId:
    Description: The ID of the route entry.
    Value:
      Fn::GetAtt:
        - RouteEntry
        - RouteEntryId
